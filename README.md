# Python Scripts for Ciliadnd Data Post-Processing

This repository contains Python scripts for post-processing simulation data related to the *ciliadnd* project. Below is a description of each script and its purpose.

---

## 1. `read_h5_files.py`

- **Purpose:** Scans directories containing simulation files and reads `database.h5` files.
- **Functionality:**
    - Extracts the values of `a` and `b` from each database file.
    - Records the file path of each `.h5` file.
    - Outputs a CSV file with columns: `a, b, path`.

---

## 2. `process_h5_files.py`

- **Purpose:** Processes each `database.h5` file listed in the CSV generated by `read_h5_files.py`.
- **Functionality:**
    - Reads steady-state tip deflections of cilia (when no particle is present in the flow, but the pressure difference is maintained).
    - Utilizes the `find_extreme_window` function from `generate_signatures.py` to analyze the database file using steady-state tip deflections.
    - Outputs two arrays:
        - Tip deflection of the cilia.
        - Mask indicating values above or below the steady-state deflection.
    - For each cilia tip deflection component (typically two), generates four lists in total.
    - Saves the processed data as a pickle file named `simdata_tip.pkl`.

---

## 3. `generate_cilia_features.py`

- **Purpose:** Generates feature lists for each particle case based on cilia tip deflection data.
- **Functionality:**
    - Operates on either the x or y component of the tip deflections (configurable in the script).
    - For each signal:
        - Subtracts the steady-state deflection value.
        - Takes the absolute value to convert valleys to peaks, simplifying area calculations.
    - Currently calculates the following features:

1. Maximum absolute deflection from steady state.
2. Area under the signal.
3. Signal width.
4. Number of peaks in the signal.
    - Stores results as a list of lists (indexed by cilium and feature), where each element is a NumPy array: `ciliafeatures[icilia][ifeature]`.
---

## Notes

- Feature definitions in `generate_cilia_features.py` are subject to ongoing development.
- Ensure all dependencies (NumPy, pandas, h5py, etc.) are installed before running the scripts.

---


